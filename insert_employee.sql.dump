DO $$
DECLARE
	 i INTEGER;
	 owner_uuid UUID; /* объявили переменную */
	  sets_uuid UUID;
	  circuit_uuid UUID;
	  section_uuid UUID;
	  auth_uuid UUID;
	  iname text;
	  auth_name text;
	 
BEGIN
	i := 0;
   FOR counterA IN 1..5 LOOP
   		INSERT INTO "InstanceX"  ("IUUID", "IName", "IType", "IConcept") 
		VALUES (uuid_generate_v4(), 'Уровень доступа_' || cast(counterA as TEXT), '00000000-0000-0000-0000-000003000000', 300000);
   END LOOP;
   FOR counter IN 1..2 LOOP
   -- i := i + 1;
	   INSERT INTO "InstanceX" ("IUUID", "IParent", "IName", "IConcept", "IType" ) 
			VALUES (uuid_generate_v4(), '00000000-0000-0000-0000-000000008011', 'Петров_' || cast(counter as TEXT),  
					8200, '00000000-0000-0000-0000-000000008001')
					 RETURNING "IUUID" INTO owner_uuid;
	   FOR keys IN 1..3 LOOP
	   		INSERT INTO "InstanceX"  ("IUUID", "IName", "IType", "IINT1", "IUUID1") 
			VALUES (uuid_generate_v4(),  'Брелок_' || cast(counter as TEXT), 
			'00000000-0000-0000-0000-000002000001', counter, (select "IUUID" from  "InstanceX" WHERE "IConcept" = 300000 order by random() limit 1))
			RETURNING "IUUID" INTO sets_uuid;
			
			INSERT INTO "ISetX" ("ISUUID", "ISetName", "ISOWNER", "ISUUID1", "ISConcept") 
			VALUES (uuid_generate_v4(), 'Брелок на Петрове_' || cast(counter as TEXT) , owner_uuid, sets_uuid, 400200);
			
	   END LOOP;
	END LOOP;
	FOR counterS IN 1..2 LOOP
		INSERT INTO "InstanceX"  ("IUUID", "IName", "IType") 
		VALUES (uuid_generate_v4(),  'Раздел_' || cast(counterS as TEXT), '00000000-0000-0000-0001-000000007001')
		RETURNING "IUUID" INTO section_uuid;
		
		FOR counterС IN 1..4 LOOP
			INSERT INTO "InstanceX"  ("IUUID", "IName", "IType") 
			VALUES (uuid_generate_v4(),  'Шлейф_' || cast(counterС as TEXT), '24227921-6d86-4bed-9654-310a5e28b408')
			RETURNING "IUUID" INTO circuit_uuid;
			
			INSERT INTO "ISetX" ("ISUUID", "ISetName", "ISOWNER", "ISUUID1", "ISConcept") 
			VALUES (uuid_generate_v4(), 'Шлейф_' || cast(counterС as TEXT) || ' на Разделе_' ||  cast(counterS as TEXT), section_uuid, circuit_uuid, 500100);
			
		END LOOP;	
	END LOOP;
	-- связь УД --> Раздел
	FOR auth_uuid, auth_name IN 
			SELECT "IUUID", "IName" FROM "InstanceX" WHERE "IConcept" = 300000
			LOOP
				FOR i IN 1..10
					LOOP 
						INSERT INTO "ISetX" ("ISUUID", "ISetName", "ISOWNER", "ISUUID1", "ISConcept") 
						VALUES (uuid_generate_v4(), 'Раздел_ на ' || auth_name , auth_uuid, 
						(select "IUUID" from  "InstanceX" WHERE "IType" = '00000000-0000-0000-0001-000000007001' order by random() limit 1),
						400100);
					END LOOP;
			END LOOP;
	
   -- RAISE NOTICE 'Counter: %', counter;
   -- RAISE NOTICE 'i %', i;
   
END; 
$$ LANGUAGE plpgsql;